{% extends "base.html" %}
{% load bootstrap3 %}
{% block title %}User{% endblock %}

{% block content %}
    <h1>User Profile
        {% if object == currentUser %}
        <a class="btn btn-default" href="edit">Edit Profile</a>
        {% endif %}
    </h1>

    <hr/>
    <dl class="dl-horizontal">
        <dt>Email</dt><dd>{{ object.email }}</dd>
        <dt>First Name</dt><dd>{{ object.first_name }}</dd>
        <dt>Last Name</dt><dd>{{ object.last_name }}</dd>
        <dt>Date of Birth</dt><dd>{{ object.date_of_birth }}</dd>
        <dt>Gender</dt><dd>{{ object.gender }}</dd>
        <dt>Last Login</dt><dd>{{ object.last_login }}</dd>
        <dt>Average Rating</dt><dd>{{ object.rating }}</dd>
    </dl>


    <br />
    <h1>Feedback Thread</h1>
    <div>
        {% for feedback in thread %}
            <div  class="panel panel-default">
                <div class="panel-body">
                    <dl class="dl-horizontal">
                        <dt>
                            {{ feedback.sender }}
                            <br/>
                            {{ feedback.pub_date | date:"m/d/y h:i A" }}
                            <br/>
                            {% for i in ratingSize %}
                                {% if forloop.counter0 < feedback.rating %}
                                    <span class="glyphicon glyphicon-star" aria-hidden="true"></span>
                                {% else %}
                                    <span class="glyphicon glyphicon-star-empty" aria-hidden="true"></span>
                                {% endif %}
                            {% endfor %}
                            {% if feedback.sender == currentUser %}
                                <br/>
                            <a  class="btn btn-default" href="{% url 'barter:feedback_edit' object.pk forloop.counter %}">
                            edit
                            </a>
                        {% endif %}
                        </dt>
                        <dd>
                            {{ feedback.message }}
                        </dd>

                    </dl>

                </div>
                {% if feedback.last_edit != None %}
                <div class="panel-body">
                    <footer class="footer">

                        Last Edit: {{ feedback.last_edit }}

                    </footer>
                </div>
                {% endif %}
            </div>
        {% endfor %}
    </div>
    {% if object != currentUser %}
        <h2 class="btn btn-default btn-lg">
            Leave Feedback
            <span class="glyphicon glyphicon-chevron-down" aria-hidden="true"></span>
        </h2>
        <form class="hiddenform" method="post" action="feedback/">
            {% csrf_token %}
            {% bootstrap_form form %}
            <label class="control-label" for="id_rating">Rating</label>
            <div class="stars">
                <span class="glyphicon glyphicon-star-empty" aria-hidden="true" id="1"></span>
                <span class="glyphicon glyphicon-star-empty" aria-hidden="true" id="2"></span>
                <span class="glyphicon glyphicon-star-empty" aria-hidden="true" id="3"></span>
                <span class="glyphicon glyphicon-star-empty" aria-hidden="true" id="4"></span>
                <span class="glyphicon glyphicon-star-empty" aria-hidden="true" id="5"></span>
            </div>
        <br />
            {% block button %}
                {% buttons submit="Submit Feedback" %}{% endbuttons %}
            {% endblock %}
        </form>
    {% endif %}
    <hr/>
{% endblock %}